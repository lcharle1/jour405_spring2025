---
title: " final_project "
output: html_notebook
 b---


Using table A-7 from a pdf, https://www2.census.gov/library/publications/2024/demo/p60-282.pdf ,produced by the US Census Bureau about the number and real median earnings of total workers and full-time, year-round workers with earnings by sex, from 1960 to 2023. I narrowed down my research to total workers and 2000 to 2023 because the prior to 2000 the data has N/A's. Information on sampling error, non sampling error, and definitions is available at <https://www2.census.gov/programs-surveys/cps/techdocs/cpsmar24.pdf. 


Compared to the other source I found, this does not mention the race/ethnicity of the workers. But I altered by null and alternate hypothesis to match the data. 

Null hypothesis: There is no difference in the average earnings between men and women

Alternate hypothesis: There is a difference in the average earnings between men and women. 

I replicated the work we did in HW 9 (testscores) to perform the t-test and show a linegraph showing the difference in earnings between men and women in the last 23 years. 

```{r}
# library
library(tidyverse)

library(janitor)

```


```{r}
## Performing t-test


#Earning dataset showcasing the earnings between men and women over the last 23 years.  
earning_data <- read_csv("project/earningsandratiobysexoccrace-2023.xlsx - Total Workers Sheet.csv")

# Set the significance level
alpha_level <- 0.05

# Perform a two-sample t-test comparing men vs. women earnings
t_test_result <- t.test(earnings ~ sex, data = earning_data)

t_test_result


```

```{r}
# Get the p-value
p_value <- t_test_result$p.value

# Get the 95% confidence interval
ci <- t_test_result$conf.int

# Compute group stats
group_stats <- earning_data |>
  group_by(sex) |>
  summarize(avg_earnings = mean(earnings, na.rm = TRUE))

# Extract group means
mean_male <- group_stats |> filter(sex == "Male") |> pull(avg_earnings)
mean_female <- group_stats |> filter(sex == "Female") |> pull(avg_earnings)

# Build a summary tibble for your story
story_stats <- tibble(
  `Male average` = mean_male,
  `Female average` = mean_female,
  `Difference` = mean_male - mean_female,
  `Percent difference` = round(((mean_male - mean_female) / mean_female) * 100, 1),
  `p-value` = sprintf("%.4f", p_value),
  `Lower bound (95% CI)` = round(ci[1], 2),
  `Upper bound (95% CI)` = round(ci[2], 2),
  `Confidence level` = "95%"
)

# Show the summary
story_stats

```

According to the story_stats, we can reject the null hypothesis because there a difference in average earnings between men and women and the p-value is 0.00, 

```{r}

#Line graph showing the earnings of men and women every year between 2000 - 2023.

ggplot(earning_data, aes(x = year, y = earnings, color = sex)) +
  geom_line(size = 1.2) +
  geom_point(size = 2) +
  labs(
    title = "Median Earnings by Sex Over Time",
    x = "Year",
    y = "Median Earnings (USD)",
    color = "Sex"
  ) +
  theme_minimal() +
  scale_color_manual(values = c("Male" = "#1f78b4", "Female" = "#e31a1c")) +
  theme(
    plot.title = element_text(face = "bold", size = 14),
    axis.title = element_text(face = "bold"),
    legend.position = "top"
  )
  
```



